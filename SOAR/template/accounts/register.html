{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Student Registration</title>
    <link rel="stylesheet" href="{% static 'css/accounts/auth.css' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        .helptext {
            display: none;
        }
        
        /* Show help text on hover */
        .form-group:hover .helptext,
        .form-group:focus-within .helptext {
            display: block;
            font-size: 0.75rem;
            color: #64748b;
            margin-top: 4px;
            line-height: 1.4;
            background: #f8f9fa;
            padding: 6px 10px;
            border-radius: 4px;
            border-left: 3px solid #3b82f6;
        }
        
        /* Top-level error alert styling */
        .alert {
            padding: 12px 16px !important;
            border-radius: 8px !important;
            margin: 0 0 20px 0 !important;
            font-size: 0.95rem !important;
            font-weight: 600 !important;
            border-left: 4px solid !important;
        }
        
        .alert-error {
            color: #dc2626 !important;
            background-color: #fee2e2 !important;
            border-color: #dc2626 !important;
        }
        
        /* Error messages styling */
        .form-group .errorlist,
        p.form-group .errorlist,
        span.errorlist {
            display: block !important;
            position: static !important;
            margin-top: 6px !important;
            clear: both;
            font-size: 0.85rem;
            background: #fee2e2;
            color: #991b1b;
            padding: 8px 12px;
            border-radius: 6px;
            border-left: 3px solid #dc2626;
        }
        
        /* Ensure form fields stack properly */
        .auth-form p.form-group {
            display: block;
            position: relative;
            margin-bottom: 0;
        }
        
        .auth-form p.form-group input,
        .auth-form p.form-group select {
            display: block;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="auth-card register-wide">
        <section class="auth-hero">
            <div class="brand">
                <img src="{% static 'images/soar2.png' %}" alt="SOAR logo" />
            </div>
            <h1>Welcome</h1>
            <p>Create your account</p>
        </section>
        <section class="auth-form">
            <div class="brand mobile">
                <img src="{% static 'images/soar2.png' %}" alt="SOAR logo" />
            </div>
            <h2>Register</h2>
            
            {% if form.non_field_errors %}
                <div class="alert alert-error">
                    {% for error in form.non_field_errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
            
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags|default:'info' }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
            
            <form method="POST">
                {% csrf_token %}
                {% for field in form %}
                    <p class="form-group">
                        {{ field }}
                        {{ field.label_tag }}
                        {% if field.help_text %}
                            <small class="helptext">{{ field.help_text|safe }}</small>
                        {% endif %}
                        {% for error in field.errors %}
                            <span class="errorlist">{{ error }}</span>
                        {% endfor %}
                    </p>
                {% endfor %}
                <button class="btn-primary" type="submit" style="width: 100%; max-width: 320px; margin: 20px auto 0; display: block; padding: 14px 24px;">Register</button>
            </form>
            <div style="margin-top: 20px; text-align: center;">
                <p>Already have an account? <a href="{% url 'login' %}" style="color: #0B5DD8; text-decoration: none; font-weight: 500;">Back to Login</a></p>
            </div>
        </section>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.8/jquery.inputmask.min.js"></script>
    <script>
        $(document).ready(function(){
            $("[name='student_id']").inputmask("99-9999-999");  
        });
    </script>
</body>
</html>
